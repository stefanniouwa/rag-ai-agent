# Phase 2C: Streamlit Frontend

## Brief Description

Implement the Streamlit web application frontend that provides user authentication, file upload interface, document management, and chat interface. This phase creates the user-facing components that tie together the ingestion and query systems into a cohesive web application experience.

## Files to Create:
- `streamlit_app.py` - Main Streamlit application entry point
- `src/ui/auth.py` - Authentication components using Supabase auth
- `src/ui/file_upload.py` - File upload interface and handlers
- `src/ui/document_manager.py` - Document listing and management UI
- `src/ui/chat_interface.py` - Chat UI components and session management
- `src/config.py` - Configuration management and environment variables
- `tests/test_streamlit_app.py` - E2E tests for Streamlit components

## Streamlit App Structure:
1. **Authentication Flow**: Login/logout using Supabase auth with session state
2. **Sidebar Navigation**: File upload section and document management
3. **Main Content Area**: Chat interface with message history
4. **File Upload Component**: Multi-file uploader with progress indicators
5. **Document Table**: Display uploaded files with delete functionality
6. **Chat Interface**: Message input, response display with citations, new session button

## Key UI Functions:
- `render_auth_flow() -> bool` - Handle login/logout state
- `render_file_upload() -> None` - File upload UI and processing
- `render_document_manager() -> None` - Document list and delete operations
- `render_chat_interface() -> None` - Chat UI with memory management
- `format_response_with_citations(response: str, sources: List[VectorChunk]) -> None`

## Authentication Implementation:
- Supabase Auth integration with email/password
- Session state management in Streamlit
- Protected routes requiring authentication
- Logout functionality with session cleanup
- User registration and password reset flows

## File Upload Interface:
- Multi-file drag-and-drop uploader
- File type validation (PDF, DOCX, TXT, HTML, MD)
- Upload progress indicators
- Real-time processing status updates
- Error handling and user feedback

## Document Management Features:
1. **List Documents**: Display all uploaded documents with metadata
2. **Delete Document**: Remove document and cascade delete all associated vectors
3. **Document Stats**: Show chunk count and storage info per document
4. **Bulk Operations**: Multi-select delete functionality

## Chat Interface Design:
- Message history display with user/AI message differentiation
- Real-time typing indicators during response generation
- Citation display with expandable source snippets
- New session button to reset conversation context
- Message input with enter-to-send functionality
- Copy response functionality for user convenience

## Session Management:
- Persistent session IDs tied to authenticated users
- Chat history loading on page refresh
- Session isolation between different users
- "New Session" functionality to start fresh conversations

## UI/UX Considerations:
- Responsive design for different screen sizes
- Loading states and progress indicators
- Error messages and user feedback
- Intuitive navigation and workflow
- Accessibility considerations for screen readers

## Streamlit Configuration:
- Custom theming and styling
- Page configuration and metadata
- Caching strategies for performance
- Session state management best practices

## Dependencies Required:
- `streamlit` - Web application framework
- `supabase` - Authentication and database client
- `streamlit-authenticator` - Enhanced auth components (optional)

## Testing Requirements:
- Unit tests for UI component functions
- Integration tests for auth flow
- E2E tests simulating user workflows
- UI component testing with streamlit-testing
- Cross-browser compatibility testing

## Performance Optimizations:
- Streamlit caching for expensive operations
- Lazy loading of document lists
- Debounced search and input handling
- Efficient session state management
